.. sectionauthor:: Михаил Гусев <mikhail.gusev@nextgis.ru>

.. _ngfb_gui:

Описание интерфейса
===================

По умолчанию интерфейс программы имеет следующий вид: (:numref:`ngfb_gui_pic`).

.. figure:: _static/ngfb_gui.png
   :name: ngfb_gui_pic
   :align: center
   :width: 16cm

   Внешний вид интерфейса приложения Formbuilder

   Цифрами обозначено: 1 - главное меню; 2 - панель инструментов; 3 - маркер наличия обновлений; 4 - кнопка авторизации; 5 - "экран устройства"; 6 - меню "Элементы"; 7 - меню "Данные"; 8 - меню "Свойства".

Вы можете измененить положение, размер и видимость боковых меню:

   * наведите курсор мыши на шапку меню и зажмите левую кнопку для перетаскивания его в другое место;
   * потяните за край меню для изменения его ширины/высоты;
   * нажмите на кнопку закрытия меню чтобы скрыть его. Восстановить видимость можно из пункта "Вид" главного меню.

.. _ngfb_main_menu:

Главное меню
------------

Главное меню содержит следующие пункты:

**Файл**

    * **Новый**. Создать новый пустой проект.
    * **Открыть**. Открыть проект, загрузив его из файла с расширением ".ngfp".
    * **Сохранить**. Сохранить проект в файл с расширением ".ngfp".
    * **Сохранить как...**. Сохранить проект в файл с расширением ".ngfp", выбрав путь до файла.
    * **Выход**. Выход из программы.

**Правка**

    * **Скачать из NextGIS**. Скачать форму (и данные) из NextGIS Web с выбором существующего слоя, указав параметры подключения к своей веб-гис.
    * **Загрузить в NextGIS**. Отправить форму в NextGIS Web с созданием нового слоя, указав параметры подключения к своей веб-гис.
    * **Свойства формы**. Редактировать основные свойства формы: имя слоя и тип геометрии собираемых объектов.
    * **Очистить форму**. Удалить все элементы на форме.
    * **Связывать элементы с полями**. Включает/выключает режим автоматического создания полей. Если режим включён, то при размещении новых элементов на форме автоматически создаются поля слоя и привязываются к этим элементам.

**Вид**

    * **Панели**. Скрытие/показ различных меню и панелей интерфейса.

**Настройки**

    * **Язык**. Выбор языка интерфейса. Для того чтобы изменения вступили в силу необходимо перезагрузить приложение.

**Помощь**

    * **Показать страницу помощи**. Открытие страницы помощи в бразуере.
    * **Нужна поддержка?**. Открытие страницы коммерческой поддержки в браузере.
    * **О программе**. Показ диалога "О программе".

.. _ngfb_toolbar:

Панель инструментов
-------------------

Содержит кнопки быстрого доступа к подпунктам главного меню. Наведите курсор мыши на кнопку чтобы увидеть её название (во всплывающем сообщении) и описание (в статусной строке программы внизу).

.. note::
    Некоторые кнопки панели инструментов могут быть недоступны, о чём свидетельствует иконка в виде замка на той или иной кнопке. Для того чтобы получить полный доступ ко всем функциям программы - пройдите авторизацию, и при наличии подписки функциональность станет доступной.

.. _ngfb_update_info:

Маркер наличия обновлений
-------------------------

Маркер в виде зелёного квадрата со стрелкой (по умолчанию справа вверху) будет показан только если программе удалось найти доступные обновления (только для Windows и Mac OS). Если маркер не показан - то обновлений либо нет, либо программе не удалось подключиться к серверу обновлений. При наличии маркера нажмите на него чтобы обновить программу: программа закроется (с предложением сохранить проект при наличии изменений), после чего откроется диалог обновления компонентов NextGIS. Следуйте шагам мастера установки обновлений. После завершения работы диалога программа запустится автоматически.

Альтернативо можно запустить мастер обновления компонентов NextGIS как отдельную программу из директории установки NextGIS.

.. _ngfb_auth:

Авторизация
-----------

Кнопка с изображением аватара (по умолчанию справа вверху) позволяет пройти авторизацию в сервисах NextGIS и получить расширенную функциональность программы при наличии подписки. Нажмите на кнопку и во всплывающем окне кликните "Войти". В открывшейся странице браузера ведите логин и пароль NextGIS ID, после чего вернитесь в программу. Если при последующем нажатии на кнопку с аватаром во всплывающем окне есть надпись "На поддержке", то вся функциональность программы должна быть доступна.

Для того чтобы выйти из аккаунта, нажмите на кнопку авторизации ещё раз и во всплывающем окне нажмите "Выход".

.. note::
    Авторизацию нужно пройти один раз. При следующем запуске программы авторизация произойдет автоматически. Обратите внимание, что после запуска программы и перед тем как заблокированная функциональность станет доступна может пройти несколько секунд.
    
Если вы хотите сменить аккаунт, выйдите из него как в приложении, так и в браузере. Тогда при следующем нажатии кнопки "Войти" вам снова будет предложено ввести логин и пароль.

.. _ngfb_auth_onpremise:

Авторизация через свой сервер (NGIDOP) 
--------------------------------------

Для авторизации в приложении NextGIS Formbuilder через свой сервер, необходимо указать соответствующий Endpoint в настройках авторизации (Главное меню -> Настройки -> Авторизация) (:numref:`Endpoint_Formbuilder`).

.. figure:: _static/Endpoint_Formbuilder.png
   :name: Endpoint_Formbuilder
   :align: center
   :width: 10cm

   Добавление собственного сервера авторизации

.. _ngfb_screen:

Экран устройства
----------------

Макет экрана реального устройства на котором будет производится сбор данных в NextGIS Mobile. Предназначен для создания формы: т.е. для размещения, перемещения и группирования элементов из которых состоит форма и с помощью которых будут заноситься данные об одном объекте редактируемого слоя в момент сбора данных. Элементы в форме располагаются вертикально друг за другом. Имеется возможность группировки элементов по именованным вкладкам.

Чтобы *добавить элемент* на форму - начните перетаскивать его курсором с зажатой левой кнопкой мыши из меню "Элементы" (по умолчанию слева) - курсор примет форму сжатой руки. Альтернативно можно быстро добавить элемент в конец формы один раз щёлкнув по нему левой кнопкой мыши в панели "Элементы" с зажатой клавишей клавиатуры Ctrl.

Чтобы *выделить элемент* - нажмите на него на форме левой кнопкой мыши один раз. Вокруг элемента появится красная пунктирная рамка.

Чтобы *переместить элемент* - перетащите его с зажатой левой кнопкой мыши в любое место формы.

Чтобы *удалить элемент* - выделите его и нажмите клавишу клавиатуры Delete. Удаление элемента отменить нельзя. Обратите внимание, что при удалении элемента удалятся и связанные с ним поля слоя.

.. _ngfb_elements:

Меню "Элементы"
---------------

Содержит в себе список всех доступных элементов которые можно создать на форме. Наведите курсор на элемент чтобы увидеть его описание во всплывающем сообщении.

Чтобы *добавить элемент* на форму - начните перетаскивать его курсором с зажатой левой кнопкой мыши на экран устройства - курсор примет форму сжатой руки. Альтернативно можно быстро добавить элемент в конец формы один раз щёлкнув по нему левой кнопкой мыши с зажатой клавишей клавиатуры Ctrl.

.. note::
    Некоторые элементы могут быть недоступны, о чём свидетельствует иконка в виде замка на том или ином элементе. Для того чтобы получить полный доступ ко всем функциям программы - пройдите авторизацию, и при наличии подписки функциональность станет доступной.

.. _ngfb_data:

Меню "Данные"
-------------

Содержит в себе таблицу полей слоя. В программе Formbuilder в одном проекте редактируется только одна форма, привязанная только к одному слою. Поля слоя создаются *автоматически* при добавлении элементов на форму (у элемента может быть от 0 до 2 связанных полей). Чтобы увидеть к какому элементу привязаны какие поля - выделите элемент. Привязанные к элементу поля, если такие есть, будут выделены жирным шрифтом в таблице.

При создании элементов для полей автоматически генерируются их имя, псевдоним и тип:

    * **Имя поля** изменять нельзя;
    * **Псевдоним поля** можно изменить в соответствующей текстовой строке в таблице. Напечатайте новое имя в этой строке - изменения сохранятся автоматически;
    * **Тип поля** можно изменить в соответствующем выпадающем списке в таблице. Выберите необходимый тип данных из выпадающего списка - изменения сохранятся автоматически. Обратите внимание, что тип поля зависит от самого элемента и его свойств (например элемент "Дата и время" может сохранять только значения типа "Дата/время" и "Строка" в момент сбора данных, но не может сохранять значение типа "Целое число"). Для некоторых элементов можно менять их свойства чтобы у соответствующих полей появилось больше доступных типов данных (например чтобы текстовое поле сохраняло числовые значения - установите свойство "Только цифры" в таблице меню "Свойства" и поменяйте тип данных поля на "Целое число" в таблице меню "Данные").

.. _ngfb_properties:

Меню "Свойства"
---------------

Содержит в себе таблицу свойств выделенного элемента. Выделите элемент, нажав по нему левой кнопкой мыши. Изменяйте свойства в появившейся таблице - изменения в элементе будут сохраняться автоматически. Обратите внимание: изменение одного свойства может повлечь за собой изменение другого свойства этого элемента из-за их несовместимости или взаимного влияния друг на друга. Изменение свойств элемента также ведёт к увеличению или уменьшению количества доступных типов для связанных с элементом полей: отследить это можно в таблице меню "Данные".
